<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="view_partner_property_form" model="ir.ui.view">
        <field name="name">res.partner.property.form.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="account.view_partner_property_form" />
        <field name="arch" type="xml">
            <xpath expr="//page[@name='accounting']" position="after">
                <page
                    name="pit"
                    string="Personal Income Tax"
                    groups="account.group_account_invoice,account.group_account_readonly"
                >
                    <div class="oe_right" name="buttons">
                        <button
                            name="action_view_pit_yearly_summary"
                            string="View Yearly Summary"
                            icon="fa-refresh"
                            type="object"
                        />
                    </div>
                    <group name="pit" string="Personal Income Tax">
                        <field
                            name="pit_line"
                            nolabel="1"
                            context="{'default_manual': True}"
                        >
                            <tree editable="bottom" string="PIT" create="1" delete="0">
                                <field name="payment_id" />
                                <field name="date" optional="show" />
                                <field name="calendar_year" />
                                <field name="wht_cert_income_type" />
                                <field name="amount_income" sum="Total Income" />
                                <field name="amount_wht" sum="Total WHT" />
                                <field name="cancelled" optional="show" />
                                <field
                                    name="payment_state"
                                    widget="badge"
                                    decoration-info="payment_state == 'draft'"
                                    decoration-success="payment_state == 'posted'"
                                />
                            </tree>
                        </field>
                    </group>
                </page>
            </xpath>
        </field>
    </record>
</odoo>
